<div class="content">

  <div class="container">
    <div class="row align-items-stretch no-gutters contact-wrap">
      <div class="col-md-12">
        <div class="form h-100">
          <div class="row">
            <div class="col-md-11">
              <h3 class="header-color text-dark text-center">CHỈNH SỬA HỢP ĐỒNG</h3>
            </div>
            <div class="col-md-1">
            </div>
          </div>

          <form class="mb-5" method="post" id="contactForm" name="contactForm" [formGroup]="contractForm">
            <div class="row">
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Mã hợp đồng
                </label>
                <input formControlName="code" hidden type="text" class="form-control pl-2">
                <div class="form-control pl-2">
                  {{contractForm.value.code}}
                </div>
              </div>
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Khách hàng
                </label>
                <select [compareWith]="compareWithId" class="custom-select form-select" formControlName="customer">
                  <option *ngFor="let customer of customerList" [ngValue]="customer">{{customer.name}} (Mã
                    KH: {{customer.id}})
                  </option>
                </select>
              </div>
            </div>

            <!--            <div class="col-md-6 form-group mb-3">-->
            <!--              <label for="exampleDataList" class="form-label">-->
            <!--                Khách hàng-->
            <!--                <span style="color: red">*</span>-->
            <!--              </label>-->
            <!--              <input class="form-control" list="datalistOptions" id="exampleDataList" placeholder="Type to search..."formControlName="customer">-->
            <!--              <datalist id="datalistOptions">-->
            <!--                <option *ngFor="let customer of customerList" [ngValue]="customer">{{customer.name}} (Mã KH: {{customer.id}})</option>-->
            <!--              </datalist>-->
            <!--            </div>-->
            <!--        </div>-->

            <div class="row" formGroupName="pawnItem">
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Loại đồ
                </label>
                <select [compareWith]="compareWithId" class="custom-select form-select" formControlName="pawnType">
                  <option *ngFor="let pawnType of pawnTypeList" [ngValue]="pawnType">{{pawnType.name}}</option>
                </select>
              </div>

              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Tên đồ
                  <span style="color: red"
                        *ngIf="contractForm.get('pawnItem').get('name').hasError('required') &&
                        (contractForm.get('pawnItem').get('name').touched || contractForm.get('pawnItem').get('name').dirty)">
                    Không được để trống
                  </span>
                </label>
                <input type="text" class="form-control pl-2" formControlName="name">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Tiền cầm đồ (VNĐ)
                  <span style="color: red"
                        *ngIf="contractForm.get('itemPrice').hasError('min') &&
                        (contractForm.get('itemPrice').touched || contractForm.get('itemPrice').dirty)">
                    Không được nhỏ hơn 0
                  </span>
                  <span style="color: red"
                        *ngIf="contractForm.get('itemPrice').hasError('required') &&
                        (contractForm.get('itemPrice').touched || contractForm.get('itemPrice').dirty)">
                    Không được để trống
                  </span>
                </label>
                <input type="number" class="form-control pl-2" formControlName="itemPrice">
              </div>
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Tiền lãi (%)
                  <span style="color: red"
                        *ngIf="contractForm.get('interestRate').hasError('required') &&
                        (contractForm.get('interestRate').touched || contractForm.get('interestRate').dirty)">
                    Không được để trống
                  </span>
                  <span style="color: red"
                        *ngIf="contractForm.get('interestRate').hasError('min') &&
                        (contractForm.get('interestRate').touched || contractForm.get('interestRate').dirty)">
                    Không được nhỏ hơn 0.2%
                  </span>
                  <span style="color: red"
                        *ngIf="contractForm.get('interestRate').hasError('max') &&
                        (contractForm.get('interestRate').touched || contractForm.get('interestRate').dirty)">
                    Không được lớn hơn 0.4%
                  </span>
                </label>
                <input type="text" class="form-control pl-2" formControlName="interestRate">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Ngày làm hợp đồng
                </label>
                <span style="color: red; font-size: 0.8rem" *ngIf="contractForm.get('startDate').touched
               && contractForm.hasError('required', 'startDate')"> Ngày không được để trống.</span>
                <span style="color: red" *ngIf="contractForm.get('startDate').dirty
                && contractForm.hasError('checkDate')"> Không được lớn hơn ngày kết thúc.</span>
                <input type="date" class="form-control pl-2" formControlName="startDate">

              </div>
              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Ngày kết thúc hợp đồng
                </label>
                <span style="color: red"
                      *ngIf="contractForm.get('endDate').touched && contractForm.hasError('required', 'endDate')"> Không được để trống</span>
                <span style="color: red"
                      *ngIf="contractForm.get('endDate').dirty && contractForm.hasError('checkDate')"> Không được lớn hơn ngày bắt đầu</span>

                <input type="date" class="form-control pl-2" formControlName="endDate">
              </div>
            </div>

            <div class="row">

              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Loại hợp đồng
                </label>
                <input hidden type="text" class="form-control pl-2" formControlName="type">
                <div *ngIf="contractForm.value.type === true" class="form-control pl-2">
                  Thanh lý
                </div>
                <div *ngIf="contractForm.value.type === false" class="form-control pl-2">
                  Cầm đồ
                </div>
              </div>

              <div class="col-md-6 form-group mb-3">
                <label class="col-form-label">
                  Trạng thái
                </label>
                <!--                <select class="custom-select form-select">-->
                <!--                  <option value="0">Đóng</option>-->
                <!--                  <option value="1">Mở</option>-->
                <!--                  <option value="2">Đang xử lý</option>-->
                <!--                </select>-->
                <input hidden type="text" class="form-control pl-2" formControlName="status">
                <div *ngIf="contractForm.value.status === 0 "
                     class="form-control pl-2">
                  Hợp đồng cầm đồ còn hạn
                </div>
                <div *ngIf="contractForm.value.status === 1 "
                     class="form-control pl-2">
                 Hợp đồng cầm đồ trả đúng hạn
                </div>
                <div *ngIf="contractForm.value.status === 2 "
                     class="form-control pl-2">
                  Hợp đồng chờ thanh lý
                </div>
                <div *ngIf="contractForm.value.status === 3 "
                     class="form-control pl-2">
                  Hợp đồng đã thanh lý
                </div>
                <div *ngIf="contractForm.value.status === 4 "
                     class="form-control pl-2">
                  Hợp đồng đăng ký nhanh
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-9 form-group"></div>
              <div class="col-md-3 form-group" style="float: right">
                <button style="margin-left:40px " value="Chỉnh sửa" class="icon p-btn  py-2 px-4" (click)="submit()">
                  Chỉnh sửa
                </button>

                <button style="float: right" value="Đóng" class="icon p-btn-close py-2 px-4">
                  Đóng
                </button>
              </div>
              <div class="col-md-3 form-group"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
